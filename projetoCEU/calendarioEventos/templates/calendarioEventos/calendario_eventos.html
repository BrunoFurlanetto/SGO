{% extends 'base.html' %}
{% load static %}
{% include 'parciais/_head.html' %}
{% load custom_filter_tag %}

{% block conteudo %}
    <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}"> <!-- Styles da bootstrap -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}"> <!-- Styles da bootstrap -->

    <div class="conteudo-calendario-eventos">
        <div id="calendar" class="card" style="padding: 10px"></div>
          {% csrf_token %}
        <script src="{% static 'fullcalendar/lib/main.js' %}"></script><!-- Script para o calendário da escala -->

        <script>
            document.addEventListener('DOMContentLoaded', function(){
                var calendarUI = document.getElementById('calendar');
                var calendar = new FullCalendar.Calendar(calendarUI,{

                    headerToolbar: {
                        left: '',
                        center: 'title',
                    },
                    eventOrderStrict: true,
                    locale: 'pt-br',
                    dayMaxEvents: 3,

                    events: [
                        {% for evento in eventos %}
                            {
                                {% if professor_ceu %}
                                    title: "{{ evento.instituicao }}",
                                    start: "{{ evento.check_in_ceu | date:'Y-m-d H:i'}}",
                                    end: "{{ evento.check_out_ceu | date:'Y-m-d H:i'}}",
                                    url: '{% url 'verDocumento' 'ordem' evento.id %}',
                                {% else %}
                                    title: "{{ evento.instituicao }}",
                                    start: "{{ evento.check_in | date:'Y-m-d H:i'}}",
                                    end: "{{ evento.check_out | date:'Y-m-d H:i'}}",
                                    url: '{% url 'verDocumento' 'ordem' evento.id %}',
                                {% endif %}

                                {% if evento.tipo == 'Empresa' %}
                                  color: '#fcc607',
                                  textColor: 'black',
                                {% endif %}

                                {% if evento.tipo == 'Colégio' %}
                                    color: '#FF8C00',
                                    textColor: 'black',
                                {% endif %}
                            },
                        {% endfor %}

                        {% if ver_ficha %}
                            {% for ficha in fichas %}
                                {% if not ficha.os%}
                                    {
                                        title: "{{ ficha.cliente}}",
                                        start: "{{ ficha.check_in | date:'Y-m-d H:i'}}",
                                        end: "{{ ficha.check_out | date:'Y-m-d H:i'}}",
                                        url: '{% url 'verDocumento' 'ficha' ficha.id %}',

                                        color: '#8B008B',
                                        textColor: 'white',
                                    },
                                {% endif %}
                            {% endfor %}
                        {% endif %}
                    ],

                });
                calendar.render();
                calendar.setOption('locale', 'pt-br')
            });
        </script>
        <div class="legenda row">
            <div class="colegio" style="display: flex; width: 300px">
                <div class="cor"></div>
                <p style="margin-top: 10px"> - Colégio</p>
            </div>
            <div class="empresa" style="display: flex; width: 300px">
                <div class="cor"></div>
                <p style="margin-top: 10px"> - Empresa</p>
            </div>
            {% if ver_ficha %}
                <div class="ficha_evento" style="display: flex;  width: 300px">
                    <div class="cor"></div>
                    <p style="margin-top: 10px"> - Ficha de Evento</p>
                </div>
            {% endif %}
        </div>

    </div>

{% endblock %}
