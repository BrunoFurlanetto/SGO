{% extends 'base.html' %}
{% load static %}
{% include 'parciais/_head.html' %}

{% block conteudo %}
    <div class="conteudo-detector">
        <div class="titulo-resumo-ceu" align="center">
            <h2>DETECTOR DE BOMBAS</h2>
        </div>
        <hr>
        <div>
            <section id="pesquisa_evento">
                <form action="{% url 'detector' %}" method="GET">
                    <fieldset>
                        {% csrf_token %}
                        <div class="row">
                            <div class="datas" style="width: 32%">
                                <label for="id_data_inicio">Data início</label>
                                <input type="date" id="id_data_inicio" name="data_inicio" value="{{ request.GET.data_inicio }}" required>
                            </div>
                            <div class="datas" style="width: 32%">
                                <label for="id_data_final">Data final</label>
                                <input type="date" id="id_data_final" name="data_final" value="{{ request.GET.data_final }}" required>
                            </div>
                            <div class="div-botao" style="width: 10%">
                                <button type="submit" class="buton-search">
                                    <span><i class='bx bx-search'></i></span>
                                </button>
                            </div>
                        </div>
                    </fieldset>
                </form>
                {% if pesquisado %}
                    <hr>
                    <div class="grupos row">
                        <div style="width: 65%">
                            <div>
                                <label for="clientes">Grupos:</label>
                            </div>
                            <div>
                                <select name="clientes" id="clientes" multiple>
                                    {% for evento in eventos %}
                                        <option value="{{ evento.ficha_de_evento.cliente.id }}">{{ evento.instituicao }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                        <div class="div-btn-scan">
                            <button type="button" class="btn btn-scan" onclick="pegar_dados_eventos()"><i class='bx bx-scan'></i></button>
                        </div>
                        <div class="div-btn-escalar-professores none" style="width: 30%">
                            <button type="button" class="btn btn-outline-dark" onclick="mostrar_por_atividade()">Escalar professores</button>
                        </div>
                    </div>
                    <script>$('#clientes').select2()</script>
                {% endif %}
                <hr>
            </section>

            <section id="detector_de_bombas"></section>

            <section class="escala-por-atividades">
                <hr>
                <h5 class="titulo-secao">Escala para as atividades</h5>
                <form action="{% url 'detector' %}" method="POST">
                    <fieldset id="formulario-escala-professores-atividades"></fieldset>
                </form>
            </section>

        </div>
        <script src="{% static 'fullcalendar/lib/main.js' %}"></script><!-- Script para o calendário da escala -->
        <script src="{% static 'js/script_detector_de_bombas.js' %}"></script><!-- Script do calendário -->
        <script src="{% static 'js/Moment.js' %}"></script>
    </div>
{% endblock %}