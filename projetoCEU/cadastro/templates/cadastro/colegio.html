{% extends 'base.html' %}
{% load static %}
{% load pipes %}
{% include 'parciais/_head.html' %}

{% block conteudo %}

<!-------------------------------- LINHA 1 ---------------------------->
  <div class="row conteudo-colegio">
    <div class="titulo-colegio">
      <center>
        <h2>CADASTRO DE ORDEM DE SERVIÇO DE COLÉGIO</h2>
      </center>
    </div>
    <hr>
    <form action="{% url 'colegio' %}" method="POST">
      {% csrf_token %}
      <script src="{% static 'js/teste.js' %}"></script>
      <script src="{% static 'js/jquery.js' %}"></script>
      <div class="row">
        <div style="width: 66%">
          <label>Instituição</label>
          {{ formulario.instituicao }}
        </div>
        <div style="width: 18%">
          <label>Série</label>
          {{ formulario.instituicao }}
        </div>
        <div style="width: 16%">
          <label>Responsáveis</label>
          {{ formulario.responsaveis }}
        </div>
      </div>
      <hr>
<!------------------------------------------------------------------------------>
      <div class="row mb-2">
        <div class="col-3">
          <label>Coordenador</label>
          {{ formulario.coordenador }}
        </div>
        <div style="width: 300px">
          <center>
            <label>Participantes: </label>
          </center>
          <div class="row">
            <div style="width: 120px">
              {{ formulario.participantes_previa }}
            </div>
            <div style="width: 170px">
              {{ formulario.participantes_confirmados }}
            </div>
          </div>
        </div>
        <div style="width: 322px">
          <label>Coordenador peraltas</label>
          {{ formulario.coordenador_peraltas }}
        </div>
      </div>

<!-------------------------------- LINHA 2 ---------------------------->
      <div class="row mb-3">
        <div class="col-3">
          <label>Data do atendimento</label>
          {{ formulario.data_atendimento }}
        </div>
        <div style="width: 25%">
          <label>Professor 2: </label>
          <select class="form-select mr-sm-2" id="p2" onChange="equipe(this)" name="prf2">
            <option selected></option>
            {% for nome in professores %}
              <option>{{ nome }}</option>
            {% endfor %}
          </select>
        </div>
        <div style="width: 25%">
          <label>Professor 3: </label>
          <select class="form-select mr-sm-2" id="p3" onChange="equipe(this)" name="prf3">
            <option selected></option>
            {% for nome in professores %}
              <option>{{ nome }}</option>
            {% endfor %}
          </select>
        </div>
        <div style="width: 25%">
          <label>Professor 4: </label>
          <select class="form-select mr-sm-2" id="p4" onChange="equipe(this)" name="prf4">
            <option selected></option>
            {% for nome in professores %}
              <option>{{ nome }}</option>
            {% endfor %}
          </select>
        </div>
      </div>
      <hr>
<!-------------------------------- TABELA ATIVIDADES ---------------------------->
      <table class="table table-striped table-sm" style="caption-side: top">
        <caption>Atividades realizadas no CEU:</caption>
        <thead>
          <tr>
            <th style="width: 400px"><center>Nome dos professores</center></th>
            <th style="width: 100px"><center>Entrada</center></th>
            <th style="width: 100px"><center>Início</center></th>
            <th style="width: 150px"><center>Atividade</center></th>
          </tr>
        </thead>
        <tbody>
          {% for atividade in atividades %}
            <tr>
              <td>
                <div class="row">
                  {% for i in rangej %}
                    <div style="width: 120px; margin-right: -20px">
                      <select class="form-control d mr-sm-2" name="prf{{ j }}atv{{ i }}">
                        <option selected></option>
                      {% for professor in professores %}
                        <option value="{{ professor.id }}">{{ professor.nome }}</option>
                      {% endfor %}
                      </select>
                    </div>
                  {% endfor %}
                </div>
              </td>
              <td>
                <center>
                  {% if forloop.counter == 1 %}
                    {{ formulario.hora_entrada }}
                  {% endif %}
                </center>
              </td>
              <td>
                <center>
                  {{ horas|index:forloop.counter0 }}
                </center>
              </td>
              <td>
                {{ atividade }}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>

<!------------------------------------------------------------------------------------->
      <div class="form-group form-check form-switch mb-3 mt-3">
        <input type="checkbox" class="form-check-input switch" id="checkLocacao" onChange="locacao()">
        <label class="form-check-label">Houve locação de espaço?</label>
      </div>
<!------------------------------------------------------------------------------------->

      <h5>Atividades ralizadas no CEU</h5>
      <table id="locacao" class="table table-striped table-sm none" style="caption-side: top">
        <caption>Atividades realizadas pela empresa:</caption>
        <thead>
          <tr>
            <th style="width: 400px"><center>Nome dos professores</center></th>
            <th style="width: 100px"><center>Entrada</center></th>
            <th style="width: 100px"><center>Início</center></th>
            <th style="width: 150px"><center>Atividade</center></th>
          </tr>
        </thead>
        <tbody>
          {% for i in rangei %}
            {% if i < 4 %}
              <tr>
                <td>
                  <div class="row">
                    {% for j in rangej %}
                      <div style="width: 120px; margin-right: -20px">
                        <select class="form-control d mr-sm-2 my-1" name="prf{{ j }}atv{{ i }}">
                          <option selected></option>
                        </select>
                      </div>
                    {% endfor %}
                  </div>
                </td>
                <td>
                  <center>
                    {% if i == 1 %}
                      <input type="time" class="form-control my-1" style="width: 100px" name="horaEntrada">
                    {% endif %}
                  </center>
                </td>
                <td>
                  <center>
                    <input type="time" class="form-control my-1" style="width: 100px" name="horaAtividade_{{ i }}">
                  </center>
                </td>
                <td>
                  <select class="form-control mr-sm-2 my-1" style="width: 100%" name="ativ{{ i }}">
                    <option selected></option>
                    {% for atividade in atividades %}
                      <option>{{ atividade }}</option>
                    {% endfor %}
                  </select>
                </td>
              </tr>
            {% endif %}
          {% endfor %}
        </tbody>
      </table>

<!-------------------------------- RELATÓRIO FINAL ---------------------------->
      <div class="form-group">
        <label>Relatório do dia:</label>
        <textarea class="form-control mb-3" style="height: 150px; resize: none" name="relatorio"> Atividades realizadas com sucesso! </textarea>
        <button id="salvar" class="btn btn-primary ml-5">Salvar</button>
        <script src="{% static 'js/teste.js' %}"></script>
      </div>



      <script>
        $("#salvar").click(function(){
            $("#solicitar").modal('show');
        });
      </script>

    </form>

    <div id="solicitar" class="modal" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Solicitar Ficha de avaliação?</h5>
            <button type="button" class="x-fechar-modal" data-bs-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p>Deseja fazer a solicitação de uma ficha de avaliação para os responsáveis do colégio?</p>
          </div>
          <div class="modal-footer">
            <button type="button" onclick="window.location.href = {% url 'solicitarAvaliacao' %}" class="btn btn-primary">Sim</button>
            <button type="button" onclick="window.location.href = {% url 'dashboard' %}" class="btn btn-secundary">Não</button>
          </div>
        </div>
      </div>
    </div>
  </div>

{% endblock %}
