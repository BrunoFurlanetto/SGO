{% extends 'base.html' %}
{% load custom_filter_tag %}
{% load static %}
{% include 'parciais/_head.html' %}

{% block conteudo %}
    <div class="row conteudo-os">
        <div class="titulo-os">
            <center>
                <h2>Ordem de serviço</h2>
            </center>
            <hr>
        </div>
        <form {% if ordem_servico %} action="{% url 'ver_ordem_de_servico' ordem_servico.id %}" {% else %}
                                     action="{% url 'ordem_de_servico' %}" {% endif %} method="POST"
                                     enctype="multipart/form-data" onsubmit="loading()">
            <fieldset id="fieldset" {% if ordem_servico %} disabled="disabled" {% endif %}>
                {% csrf_token %}
                {% if not ordem_servico %}
                    <div style="width: 75%">
                        <label>Ficha de evento</label>
                        <select name="ficha_de_evento" id="ficha_de_evento" onchange="completar_dados_os(this)">
                            <option selected></option>
                            {% for ficha in fichas %}
                                <option value="{{ ficha.id }}"
                                        {% if ficha_de_evento and ficha_de_evento.id == ficha.id %}
                                        selected {% endif %}>{{ ficha.cliente.nome_fantasia }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <hr>
                {% endif %}
                {{ form.ficha_de_evento.as_hidden }}
                <div class="row">
                    <h5 class="titulo-secao">Informações do grupo</h5>
                    <div class="mb-2" style="width: 70%">
                        <label>Instituição</label>
                        {{ form.instituicao }}
                    </div>
                    <div style="width: 30%">
                        <label>Cidade</label>
                        {{ form.cidade }}
                    </div>
                    <div style="width: 70%">
                        <label>Endereço</label>
                        <input type="text" name="endereço_cliente" id="id_endereco"
                               value="{{ ficha_de_evento.cliente.endereco }}">
                    </div>
                    <div class="mb-2" style="width: 30%">
                        <label>CNPJ</label>
                        <input type="text" name="cnpj_cliente" id="id_cnpj" value="{{ ficha_de_evento.cliente.cnpj }}">
                    </div>
                    <div class="mb-2" style="width: 53%">
                        <label>Responsável do grupo</label>
                        {{ form.responsavel_grupo }}
                    </div>
                    <div style="width: 22%">
                        <label>Participantes</label>
                        {{ form.n_participantes }}
                    </div>
                    <div style="width: 25%">
                        <label>Tipo</label>
                        {{ form.tipo }}
                    </div>
                </div>
                <div class="row colegios {% if not ficha_de_evento.produto.colegio %} none {% endif %}">
                    <div style="width: 45%">
                        <label>Série</label>
                        {{ form.serie }}
                    </div>
                    <div style="width: 20%">
                        <label>Professores</label>
                        {{ form.n_professores }}
                    </div>
                </div>
                <div id="div_lista_segurados"
                     class="mt-2 {% if not ficha_de_evento.informacoes_adcionais.seguro %} none {% endif %}">
                    <label>Lista de segurados</label>
                    {{ form.lista_segurados }}
                </div>
                <hr>
                <div class="row mb-2">
                    <h5 class="titulo-secao">Informações internas</h5>
                    <div style="width: 39%">
                        <label>Check in (Data e hora)</label>
                        {{ form.check_in }}
                    </div>
                    <div style="width: 39%">
                        <label>Check out (Data e hora)</label>
                        {{ form.check_out }}
                    </div>
                </div>
                <div class="row">
                    <div style="width: 35%">
                        <label>Atendente</label>
                        {{ form.vendedor }}
                    </div>
                    <div class="mb-2" style="width: 35%">
                        <label>Coordenador do grupo</label>
                        {{ form.monitor_responsavel }}
                    </div>
                    <div class="mb-2" style="width: 30%">
                        <label>Empresa</label>
                        {{ form.empresa }}
                    </div>
                    <div id="link_ficha_de_evento" class="mt-2">
                        {% if ficha_de_evento %}
                            <div class="mb-2">
                                <strong>Ficha de evento: </strong>
                                <a href="{% url 'ver_ficha_de_evento' ficha_de_evento.id %}">{{ ficha_de_evento.cliente }}</a>
                            </div>
                            <div>
                                <strong>Dados do cliente: </strong>
                                <a data-target="#modal_dados_cliente" data-toggle="modal"
                                   onclick="completar_dados_cliente()"
                                   href="#modal_dados_cliente">{{ ficha_de_evento.cliente }}</a>
                            </div>
                        {% endif %}
                    </div>
                </div>
                {% if ficha_de_evento.informacoes_adcionais.transporte_fechado_internamente or ficha_de_evento.informacoes_adcionais.transporte_fechado_internamente == 1 %}
                    <hr class="transporte {% if not ficha_de_evento.informacoes_adcionais.transporte_fechado_internamente or ficha_de_evento.informacoes_adcionais.transporte_fechado_internamente == 0 %} none {% endif %}">
                    <div id="transporte"
                         class="{% if not ficha_de_evento.informacoes_adcionais.transporte_fechado_internamente or ficha_de_evento.informacoes_adcionais.transporte_fechado_internamente == 0 %} none {% endif %} transporte">
                        <h5 class="titulo-secao">Transporte</h5>
                        {% for form_transporte in forms_transporte %}
                            <div class="row">
                                <div class="btn-remover-viacao">
                                    <button type="button" onClick="remover_vaicao(this, '{{ ordem_servico.id }}')">
                                        <span><i class='bx bx-x'></i></span>
                                    </button>
                                </div>
                                <div class="checkbox" style="width: 80%" id="viacao">
                                    <label>Viação</label>
                                    {{ form_transporte.empresa_onibus }}
                                </div>
                                <div style="width: 20%" id="horario_embarque">
                                    <label for="id_hora_embarque">Horário</label>
                                    {{ form_transporte.horario_embarque }}
                                </div>
                                <div id="endereco_embarque" class="mt-2" style="width: 70%">
                                    <label>Endereço de embarque</label>
                                    {{ form_transporte.endereco_embarque }}
                                </div>
                                <div id="monitor_embarque" class="mt-2" style="width: 30%">
                                    <label for="id_monitor_embarque">Monitor embarque</label>
                                    {{ form_transporte.monitor_embarque }}
                                </div>
                                <div id="nome_motorista" class="mt-2" style="width: 70%">
                                    <label>Motorista</label>
                                    {{ form_transporte.nome_motorista }}
                                </div>
                                <div id=telefone_motorista" class="mt-2" style="width: 30%">
                                    <label>Telefone</label>
                                    {{ form_transporte.telefone_motorista }}
                                </div>
                                <div class="mt-3 mb-2" id="dados_veiculos"
                                     style="display: flex; justify-content: space-between">
                                    {% if ordem_servico.dados_transporte %}
                                        {% for dado in ordem_servico.dados_transporte.all %}
                                            {% if forloop.counter0 == forloop.parentloop.counter0 %}
                                                <div class="row">
                                                    <div>
                                                        <label class="py-1">Micro ônibus:</label>
                                                        <input type="number" name="n_micro" placeholder="n" min="0"
                                                               value="{{ dado.valor_veiculos.0.n }}"
                                                               style="width: 60px">
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div>
                                                        <label class="py-1">Ônibus 46 lugares:</label>
                                                        <input type="number" name="n_46" placeholder="n" min="0"
                                                               value="{{ dado.valor_veiculos.1.n }}"
                                                               style="width: 60px">
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div>
                                                        <label class="py-1">Ônibus 50 lugares:</label>
                                                        <input type="number" name="n_50" placeholder="n" min="0"
                                                               value="{{ dado.valor_veiculos.2.n }}"
                                                               style="width: 60px">
                                                    </div>
                                                </div>
                                            {% endif %}
                                        {% endfor %}
                                    {% else %}
                                        <div class="row">
                                            <div>
                                                <label class="py-1">Micro ônibus:</label>
                                                <input type="number" name="n_micro" placeholder="n" min="0"
                                                       value="{{ dado.valor_veiculos.0.n }}"
                                                       style="width: 60px">
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div>
                                                <label class="py-1">Ônibus 46 lugares:</label>
                                                <input type="number" name="n_46" placeholder="n" min="0"
                                                       value="{{ dado.valor_veiculos.1.n }}"
                                                       style="width: 60px">
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div>
                                                <label class="py-1">Ônibus 50 lugares:</label>
                                                <input type="number" name="n_50" placeholder="n" min="0"
                                                       value="{{ dado.valor_veiculos.2.n }}"
                                                       style="width: 60px">
                                            </div>
                                        </div>
                                    {% endif %}
                                </div>
                                {% if not forloop.last %}
                                    <hr>
                                {% endif %}
                            </div>
                        {% endfor %}
                    </div>
                    <div id="div_btn_adicionar_viacao">
                        <button type="button" id="btn_adicionar_empresa_onibus" onclick="adicionar_viacao()">
                            <i class="bx bx-plus"></i>
                        </button>
                        <label for="btn_adicionar_empresa_onibus">Adicionar viação</label>
                    </div>
                {% endif %}
                <hr class="ativs_peraltas">
                <div class="row" id="ativs_peraltas" class="ativs_peraltas">
                    <h5 class="titulo-secao">Atividades Peraltas</h5>
                    {{ form.atividades_peraltas }}
                </div>
                <hr>
                <div id="mensagens_preenchimento_atividades"></div>
                <div class="atividades-eco">
                    <div class="head">
                        <h5>Atividades extra</h5>
                        <a type="button" id="btn_abrir" class="btn-mostrar-atividades-locacoes"
                           onclick="mostrar_conteudo(this)">
                            <i class="bx bx-plus"></i>
                        </a>
                    </div>
                    <div class="content none">
                        <div id="atividades_extra" class="row ecoturismo">
                            {% if ordem_servico.atividades_eco %}
                                {% for atividade in ordem_servico.dividir_atividades_eco %}
                                    <div class="row div_pai_eco" id="div_pai_eco_{{ forloop.counter }}">
                                        <div class="mb-2 div-atividade_eco" id="div_atividade_eco_{{ forloop.counter }}"
                                             style="width: 45%">
                                            <label>Atividade</label>
                                            <select class="atividade_eco" id="ativ_eco_{{ forloop.counter }}"
                                                    name="atividade_eco_{{ forloop.counter }}"
                                                    onchange="verificar_limitacoes_eco(this)">
                                                <option></option>
                                                {% for ativ in atividades_eco %}
                                                    <option value="{{ ativ.id }}"
                                                            {% if ativ.id == atividade.atividade %}selected{% endif %}>{{ ativ.nome_atividade_eco }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                        <div class="mb-2 div-data_eco"
                                             id="div_data_hora_atividade_eco_{{ forloop.counter }}" style="width: 35%">
                                            <label>Data e hora</label>
                                            <input class="hora_atividade_eco" id="data_eco_{{ forloop.counter }}"
                                                   type="datetime-local" name="data_hora_eco_{{ forloop.counter }}"
                                                   min="{{ ordem_servico.check_in | date:'Y-m-d H:i' }}"
                                                   max="{{ ordem_servico.check_out | date:'Y-m-d H:i' }}"
                                                   onchange="verificar_limitacoes_eco(this)"
                                                   value="{{ atividade.data_e_hora }}"/>
                                        </div>
                                        <div class="mb-2 div-participantes_eco"
                                             id="div_participantes_eco_{{ forloop.counter }}" style="width: 15%">
                                            <label>QTD</label>
                                            <input class="qtd_participantes_eco"
                                                   id="participantes_eco_{{ forloop.counter }}" type="number"
                                                   name="participantes_eco_{{ forloop.counter }}"
                                                   onchange="verificar_limitacoes_eco(this)"
                                                   onclick="$(this).removeClass('revisar')"
                                                   value="{{ atividade.participantes }}"/>
                                        </div>
                                        <div class="my-0 div-icone_eco" id="div_icone_eco_{{ forloop.counter }}"
                                             style="width: 5%">
                                            <button class="buton-x buton-eco" id="btn-eco_{{ forloop.counter }}"
                                                    type="button" onClick="remover_atividade_eco(this)">
                                                <span id="spn_{{ forloop.counter }}"><i class='bx bx-x'></i></span>
                                            </button>
                                        </div>
                                        <div class="mb-2 colegios div_serie_eco"
                                             id="div_serie_eco_{{ forloop.counter }}" style="width: 50%">
                                            <label>Serie</label>
                                            <input class="serie_participantes_eco" id="serie_eco_{{ forloop.counter }}"
                                                   type="text" name="serie_participantes_eco_{{ forloop.counter }}"
                                                   value="{{ atividade.serie }}"/>
                                        </div>
                                        <div class="mb-2 colegios div_biologo_eco"
                                             id="div_biologo_eco_{{ forloop.counter }}" style="width: 40%">
                                            <label>Biologo</label>
                                            <select class="biologo_eco" id="ativ_eco_{{ forloop.counter }}"
                                                    name="biologo_eco_{{ forloop.counter }}">
                                                <option></option>
                                                {% for monitor_biologo in ordem_servico.pegar_biologos %}
                                                    <option value="{{ monitor_biologo.id }}"
                                                            {% if monitor_biologo.id == atividade.biologo %}selected{% endif %}>{{ monitor_biologo.usuario.get_full_name }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                        <hr class="barra" style="margin-left: 10px">
                                    </div>
                                {% endfor %}
                            {% endif %}
                        </div>
                        <button class="buton-plus" type="button" onclick="add_atividade_eco()" style="margin-left: 0">
                            <span><i class='bx bxs-plus-circle'></i></span>
                        </button>
                    </div>
                </div>
                <hr class="atividades-eco">
                <div class="atividade-ceu">
                    <div class="head">
                        <h5>Atividades no CEU</h5>
                        <a type="button" id="btn_abrir" class="btn-mostrar-atividades-locacoes"
                           onclick="mostrar_conteudo(this)">
                            <i class="bx bx-plus"></i>
                        </a>
                    </div>
                    <div class="content none">
                        <div id="atividades_ceu" class="row atividades">
                            {% if ordem_servico.atividades_ceu %}
                                {% for atividade in ordem_servico.dividir_atividades_ceu %}
                                    <div class="row div_pai" id="div_pai_{{ forloop.counter }}">
                                        <div class="mb-2 div-atividade" id="div_atividade_{{ forloop.counter }}"
                                             style="width: 45%">
                                            <label>Atividade</label>
                                            <select class="atividade" id="ativ_{{ forloop.counter }}"
                                                    name="atividade_{{ forloop.counter }}"
                                                    onchange="verificar_limitacoes(this)">
                                                <option></option>
                                                {% for ativ in atividades_ceu %}
                                                    <option value="{{ ativ.id }}"
                                                            {% if ativ.id == atividade.atividade %}selected{% endif %}>{{ ativ.atividade }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                        <div class="mb-2 div-data" id="div_data_hora_atividade_{{ forloop.counter }}"
                                             style="width: 35%">
                                            <label>Data e hora</label>
                                            <input class="hora_atividade" id="data_{{ forloop.counter }}"
                                                   type="datetime-local" name="data_hora_{{ forloop.counter }}"
                                                   min="{{ ordem_servico.check_in | date:'Y-m-d H:i' }}"
                                                   max="{{ ordem_servico.check_out | date:'Y-m-d H:i' }}"
                                                   onchange="verificar_limitacoes(this)"
                                                   value="{{ atividade.data_e_hora }}"/>
                                        </div>
                                        <div class="mb-2 div-participantes" id="div_participantes_{{ forloop.counter }}"
                                             style="width: 15%">
                                            <label>QTD</label>
                                            <input class="qtd_participantes" id="participantes_{{ forloop.counter }}"
                                                   type="number" name="participantes_{{ forloop.counter }}"
                                                   onchange="verificar_limitacoes(this)"
                                                   onclick="$(this).removeClass('revisar')"
                                                   value="{{ atividade.participantes }}"/>
                                        </div>
                                        <div class="my-0 div-icone" id="div_icone_{{ forloop.counter }}"
                                             style="width: 5%">
                                            <button class="buton-x" id="btn_{{ forloop.counter }}" type="button"
                                                    onClick="remover_atividade(this)">
                                                <span id="spn_{{ forloop.counter }}"><i class='bx bx-x'></i></span>
                                            </button>
                                        </div>
                                        <div class="mb-2 colegios div_serie" id="div_serie_{{ forloop.counter }}"
                                             style="width: 50%">
                                            <label>Serie</label>
                                            <input class="serie_participantes" id="serie_{{ forloop.counter }}"
                                                   type="text" name="serie_participantes_{{ forloop.counter }}"
                                                   value="{{ atividade.serie }}"/>
                                        </div>
                                        <hr class="barra" style="margin-left: 10px">
                                    </div>
                                {% endfor %}
                            {% endif %}
                        </div>
                        <button class="buton-plus" type="button" onclick="add_atividade()" style="margin-left: 0">
                            <span><i class='bx bxs-plus-circle'></i></span>
                        </button>
                    </div>
                </div>
                <hr class="atividade-ceu">
                <div class="locacao-ceu">
                    <div class="head">
                        <h5>Locacoes no CEU</h5>
                        <a type="button" id="btn_abrir" class="btn-mostrar-atividades-locacoes"
                           onclick="mostrar_conteudo(this)">
                            <i class="bx bx-plus"></i>
                        </a>
                    </div>
                    <div class="content none">
                        <div id="locacoes_ceu" class="row locacoes">
                            {% if ordem_servico.locacao_ceu %}
                                {% for locacao in ordem_servico.dividir_locacoes_ceu %}
                                    <div class="row div_pai_loc" id="div_pai_loc_{{ forloop.counter }}">
                                        <div class="mb-2 div-locacao" id="div_locacao_{{ forloop.counter }}"
                                             style="width: 25%">
                                            <label>Locação</label>
                                            <select class="locacao" id="loc_{{ forloop.counter }}"
                                                    name="locacao_{{ forloop.counter }}"
                                                    onchange="verificar_lotacao(this)">
                                                <option></option>
                                                {% for espaco in espacos %}
                                                    <option value="{{ espaco.id }}" {% if espaco.id == locacao.espaco %}
                                                            selected {% endif %}>{{ espaco.local }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                        <div class="mb-2 div-entrada-loc" id="div_entrada_{{ forloop.counter }}"
                                             style="width: 35%">
                                            <label>Check in</label>
                                            <input class="entrada" id="entrada_{{ forloop.counter }}"
                                                   type="datetime-local" name="entrada_{{ forloop.counter }}"
                                                   min="{{ ordem_servico.check_in | date:'Y-m-d H:i' }}"
                                                   max="{{ ordem_servico.check_out | date:'Y-m-d H:i' }}"
                                                   onchange="verificar_lotacao(this)"
                                                   value="{{ locacao.check_in }}"/>
                                        </div>
                                        <div class="mb-2 div-saida-loc" id="div_saida_{{ forloop.counter }}"
                                             style="width: 35%">
                                            <label>Check out</label>
                                            <input class="saida" id="saida_{{ forloop.counter }}" type="datetime-local"
                                                   name="saida_{{ forloop.counter }}" onchange="verificar_lotacao(this)"
                                                   min="{{ ordem_servico.check_in | date:'Y-m-d H:i' }}"
                                                   max="{{ ordem_servico.check_out | date:'Y-m-d H:i' }}"
                                                   value="{{ locacao.check_out }}"/>
                                        </div>
                                        <div class="my-0 div-icone-loc" id="div_icone_loc_{{ forloop.counter }}"
                                             style="width: 4%; margin-top: auto">
                                            <button class="buton-x buton-loc" id="btn-loc_{{ forloop.counter }}"
                                                    type="button" onClick="remover_locacao(this)">
                                                <span id="spn_loc{{ forloop.counter }}"><i class='bx bx-x'></i></span>
                                            </button>
                                        </div>
                                        <div class="mb-2 div-local-coffee" id="div_local_coffee_{{ forloop.counter }}"
                                             style="width: 50%">
                                            <label>Local do cofee</label>
                                            <input class="local_coffee" id="local-coffee_{{ forloop.counter }}"
                                                   type="text" name="local-coffee_{{ forloop.counter }}"
                                                   value="{{ locacao.local_coffee }}"/>
                                        </div>
                                        <div class="mb-2 div-hora-coffee" id="div_hora_coffee_{{ forloop.counter }}"
                                             style="width: 20%">
                                            <label>Hora</label>
                                            <input class="hora_coffee" id="hora-coffee_{{ forloop.counter }}"
                                                   type="time" name="hora-coffee_{{ forloop.counter }}"
                                                   onchange="verificar_lotacao(this)"
                                                   value="{{ locacao.hora_coffee }}"/>
                                        </div>
                                        <div class="mb-2 div-participantes-loc"
                                             id="div_participantes_loc_{{ forloop.counter }}" style="width: 15%">
                                            <label>QTD</label>
                                            <input class="qtd_participantes_loc"
                                                   id="participantes-loc_{{ forloop.counter }}" type="number"
                                                   name="participantes-loc_{{ forloop.counter }}"
                                                   onchange="verificar_lotacao(this)"
                                                   onclick="$(this).removeClass('revisar')"
                                                   value="{{ locacao.participantes }}"/>
                                        </div>
                                        <hr class="barra" style="margin-left: 10px">
                                    </div>
                                {% endfor %}
                            {% endif %}
                        </div>
                        <button class="buton-plus" type="button" onclick="add_locacao()" style="margin-left: 0">
                            <span><i class='bx bxs-plus-circle'></i></span>
                        </button>
                    </div>
                </div>
                <hr class="locacao-ceu">
                <div style="width: 70%; display: contents">
                    <h5 class="titulo-secao">Programação do grupo</h5>
                    {{ form.cronograma_peraltas }}
                </div>
                {% now 'Y-m-d' as today %}
                {% if ordem_servico and today > ordem_servico.check_out|date:'Y-m-d' %}
                    <hr>
                    <div style="width: 70%; display: contents">
                        <h5 class="titulo-secao">Ficha de avaliação</h5>
                        {{ form.ficha_de_avaliacao }}
                    </div>
                {% endif %}
                <hr>
                <div>
                    <div class="row mb-3">
                        <h5 class="titulo-secao">Outras observações</h5>
                        {{ form.observacoes }}
                    </div>
                </div>
            </fieldset>

            {% if ordem_servico %}
                {% if perms.ordemDeServico.change_ordemdeservico %}
                    <div class="botoes" style="display: flex; gap: 10px;">
                        <button type="submit" id="btn_salvar_os" class="btn btn-primary ml-5" disabled>Salvar</button>
                        <button type="button" class="btn btn-secondary ml-5"
                                onclick="$('#fieldset, #id_atividades_peraltas, #id_monitor_responsavel, .btn').prop('disabled', false); $('#fieldset_pdf').prop('disabled', true); editando=true; $('.select2-container').css('width','100%')">
                            Editar
                        </button>

                        {% if perms.ordemDeServico.delete_ordemdeservico %}
                            <button type="button" class="btn btn-danger ml-5" data-toggle="modal"
                                    data-target="#excluir_ordem_de_servico" disabled>Excluir
                            </button>
                        {% endif %}

                        <fieldset id="fieldset_pdf">
                            {% csrf_token %}
                            <input type="hidden" name="gerar_pdf" value="True">
                            <button type="submit" class="btn btn-outline-primary">Gerar PDF</button>
                        </fieldset>
                    </div>
                {% endif %}
            {% else %}
                <div class="botoes">
                    <button id="btn_salvar_os" type="submit" class="btn btn-primary ml-5">Salvar</button>
                </div>
            {% endif %}
        </form>
    </div>

    <!--  Modal para excluir ordem de serviço -->
    <div class="modal fade" id="modal_dados_cliente" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Dados do cliente e responsável</h5>
                    <button type="button" class="x-fechar-modal" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <h5 class="titulo-secao">Dados do cliente</h5>
                    <div class="row">
                        <div style="width: 20%">
                            <label>Código PJ</label>
                            <input type="text" value="{{ ficha_de_evento.cliente.codigo_app_pj }}" disabled>
                        </div>
                        <div style="width: 20%">
                            <label>Código PF</label>
                            <input type="text" value="{{ ficha_de_evento.codigos_app.cliente_pf }}" disabled>
                        </div>
                        <div style="width: 35%">
                            <label>Nickname</label>
                            <input type="text"
                                   value="{% if ficha_de_evento.cliente.nickname %} {{ ficha_de_evento.cliente.nickname }} {% endif %}"
                                   disabled>
                        </div>
                    </div>
                    <div class="row">
                        <div style="width: 70%">
                            <label>Razão social</label>
                            <input type="text" value="{{ ficha_de_evento.cliente.razao_social }}" disabled>
                        </div>
                        <div style="width: 30%">
                            <label>CNPJ</label>
                            <input type="text" value="{{ ficha_de_evento.cliente.cnpj }}" disabled>
                        </div>
                    </div>
                    <div class="row">
                        <div style="width: 65%">
                            <label>Nome fantasia</label>
                            <input type="text" value="{{ ficha_de_evento.cliente.nome_fantasia }}" disabled>
                        </div>
                        <div style="width: 65%">
                            <label>Endereço</label>
                            <input type="text" value="{{ ficha_de_evento.cliente.endereco }}" disabled>
                        </div>
                        <div style="width: 35%">
                            <label>Bairro</label>
                            <input type="text" value="{{ ficha_de_evento.cliente.bairro }}" disabled>
                        </div>
                        <div style="width: 45%">
                            <label>Cidade</label>
                            <input type="text" value="{{ ficha_de_evento.cliente.cidade }}" disabled>
                        </div>
                        <div style="width: 10%">
                            <label>Estado</label>
                            <input type="text" value="{{ ficha_de_evento.cliente.estado }}" disabled>
                        </div>
                        <div style="width: 20%">
                            <label>CEP</label>
                            <input type="text" value="{{ ficha_de_evento.cliente.cep }}" disabled>
                        </div>
                    </div>
                    <hr>
                    <div class="row">
                        <h5 class="titulo-secao">Dados do responsável</h5>
                        <div class="row mb-3">
                            <div style="width: 60%">
                                <label>Nome Completo</label>
                                <input type="text" value="{{ ficha_de_evento.responsavel_evento.nome }}" disabled>
                            </div>
                            <div style="width: 30%">
                                <label>Telefone</label>
                                <input type="text" value="{{ ficha_de_evento.responsavel_evento.fone }}" disabled>
                            </div>
                            <div style="width: 50%">
                                <label>Email</label>
                                <input type="text"
                                       value="{{ ficha_de_evento.responsavel_evento.email_responsavel_evento }}"
                                       disabled>
                            </div>
                            <div>
                                <label>Cargo</label>
                                <input type="text" value="{{ ficha_de_evento.responsavel_evento.listar_cargos }}"
                                       disabled>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    {% if ordem_servico %}
        <!--  Modal para excluir ordem de serviço -->
        <div class="modal fade" id="excluir_ordem_de_servico" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Tem certeza disso?</h5>
                        <button type="button" class="x-fechar-modal" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <form action="{% url 'ver_ordem_de_servico' ordem_servico.id %}" method="POST">
                        {% csrf_token %}
                        <div class="modal-body app">
                            <label for="motivo_cancelamento">Motivo cancelamento</label>
                            <input type="text" id="motivo_cancelamento" name="motivo_cancelamento" required
                                   minlength="10">
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Não</button>
                            <input type="submit" class="btn btn-primary" name="excluir" value="Sim"/>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    {% endif %}

    <script src="{% static 'js/scripts_ordem.js' %}"></script>
    <script src="{% static 'js/Moment.js' %}"></script>
    <script src="{% static 'js/Moment_timezone.js' %}"></script>
    <script src="{% static 'js/masks.js' %}"></script> <!-- Máscaras -->

    <script>
        $('#ficha_de_evento, .qtd_participantes, .qtd_participantes_loc, .qtd_participantes_eco').trigger('change')
        $('#id_empresa').trigger('change')

        {% if not ordem_servico %}
            $('#id_monitor_responsavel').select2({maximumSelectionLength: {{ n_coordenadores }}})
        {% else %}
            $('#id_monitor_responsavel').select2({maximumSelectionLength: {{ n_coordenadores }}, disabled: 'readonly'})
        {% endif %}
    </script>
{% endblock %}
